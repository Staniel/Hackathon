<link href="/static/libs/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
<script type="text/javascript">console.log("heelo");</script>
<div class="container" style="margin-top:78px">

  <div class="panel panel-primary">
  <div class="panel-heading">数据汇总</div>
  <div class="panel-body">    
      
       <label class="control-label col-md-3">数据来源<br/>(提交数据时的key)</label>
       <div class="btn-group">
                <button  ng-repeat="key in keyMapArray" ng-href="#/data/{{this.key}}" ng-click="switchTo(this.key)" type="button" class="btn charts-button btn-default" ng-class="{'btn-primary':currentKey==this.key}">{{key}}</button>            
       </div>
       <div class="form-group" id="date-picker-form-group">
            
               <br/>
                <label for="dtp_input2" class="col-md-3 control-label">查询日期起点 <br/>(UTC+0800 当日00:00)</label>
                <div class="input-group date col-md-4" data-date="" data-link-field="dtp_input2" id="date-picker">
                  <input id="date-picker-input" class="form-control" size="10" type="text" readonly>
                  <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
               </div>
                 <div class="input-group date col-md-3" data-date="" data-link-field="dtp_input2" id="date-picker"> </div>
              <input type="hidden" id="dtp_input2" value="" /><br/>   
               <label for="dtp_input2" class="col-md-3 control-label">查询时间跨度<br/>(单位:天)</label>  
               <select ng-model="timeGap" class="form-control" style="width:6em">
                  <option>1</option>
                  <option>3</option>
                  <option>7</option>
                  <option>15</option>
                  <option>30</option>
                </select>                                     
       </div>    
         <label for="dtp_input2" class="col-md-3 control-label"> </label>
         <button ng-click="doQuery()" type="button" style="width:6em;" class="btn btn-success">查询</button>      
       
    </div>
  </div>
  
  <div class="panel panel-primary" style="min-height:300px">
  <div class="panel-heading">查询结果</div>
  <div class="panel-body"> 
    <div ng-show="msg" class="alert alert-warning" role="alert">{{msg}}</div>
    <div ng-show="subMsg" class="alert alert-info" role="alert">{{subMsg}}</div>
    <div ng-show="currentKey=='KEEWIFI'">
        <table class="table" ng-show="httpData.KEEWIFI">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Humidity</th>
                    <th>Temperature</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in httpData.KEEWIFI">
                    <td>{{item.submitted_on|TOLOCAL|date:"yyyy-MM-dd HH:mm:ss Z"}}</td>
                    <td>{{item.content.humidity}}</td>
                    <td>{{item.content.temperature}}</td>
                </tr>
            </tbody>         

        </table>
    </div>
     <div ng-show="currentKey=='KEN'">
        
    </div>
     <div ng-show="currentKey=='AQICN'">
        AQICN
    </div>
    <div ng-show="currentKey=='PM25'">
      <div ng-show="httpData.PM25" class="well">
               <label class="control-label">选择要显示的数据</label>
               <select style="width:18em;display:inline;margin:0 2em;" ng-model="resQueryIndex" class="form-control">
                  <option ng-repeat="item in httpData.PM25" value="{{$index}}">{{item.submitted_on|TOLOCAL|date:"yyyy-MM-dd HH:mm:ss Z"}}</option>
                </select>              
                <button  ng-click="switchToData_PM25()" type="button" style="width:8em;" class="btn btn-primary">显示该组数据</button>  
      </div>
    </div>


    <div id="mapDiv" ng-show="showMapDiv" style="height:600px"></div>
   

  </div>
  </div>   

</div>